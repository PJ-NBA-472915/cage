server {
  listen 80;
  server_name _;

  # Serve your JSON files from here
  root /usr/share/nginx/html;
  index index.html;

  # Correct MIME and basic optimisation
  default_type application/json;
  gzip on;
  gzip_types application/json text/plain application/javascript text/css;
  gzip_min_length 512;

  # CORS (adjust origins if you want to restrict)
  add_header Access-Control-Allow-Origin "*" always;
  add_header Access-Control-Allow-Methods "GET, HEAD, OPTIONS" always;
  add_header Access-Control-Allow-Headers "Content-Type, Authorization" always;
  if ($request_method = OPTIONS) { return 204; }

  # Optional: Basic Auth (uncomment to require auth)
  # auth_basic "Restricted";
  # auth_basic_user_file /etc/nginx/.htpasswd;

  # Autoindex to browse the directory
  autoindex on;
  autoindex_exact_size off;
  autoindex_localtime on;

  # Health endpoint (expects a file /usr/share/nginx/html/health.json)
  location = /health.json { try_files /health.json =404; }

  # Serve files; deny uploads/mutating verbs
  location / {
    limit_except GET HEAD OPTIONS { deny all; }
    try_files $uri $uri/ =404;
  }
}
